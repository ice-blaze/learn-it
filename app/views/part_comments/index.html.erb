<h1>Comments index</h1>

<div class="row">
  <div class="large-2 columns panel">
    <h4>All parts</h4>
    <% @parts.each_with_index do |p,index| %>
      <%= link_to (index+1).to_s+' '+p.title, [@tutorial,p], class: 'custom-button-class disabled' %>
    <% end %>
  </div>
  <div class="large-10 columns">
    <div class="row">
      <div class="text-center columns panel">
        <h4><%= @part.title %></h4>
        <p><%= @part.content %></p>
      </div>
    </div>
    <div class="row">
      <div class="columns">
        <%= render partial: 'page/add_comment', locals: {link: [@tutorial,@part,@part.part_comments.build]} %>
        <br>

        <!--Comments zone-->
        <% @part.part_comments[0..-2].reverse.each do |c| %>
          <div class="row comment-panel">

            <!-- Content zone-->
            <%= render partial: 'page/comment_content', locals: {comment: c} %>

            <!-- +/- zone, vote of comments-->
            <div class="large-2 columns text-right">
              <%= render partial: 'page/comment_vote', locals: {
                  votes: c.part_comment_votes,
                  update_vote_link: [@tutorial,@part,c],
                  create_vote_link: [@tutorial,@part,c,c.part_comment_votes.build]
              } %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>